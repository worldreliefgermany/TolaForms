<ng-content></ng-content>

<ul class="list-group" dnd-sortable-container [sortableData]="formsService.getForm(formId)?.fields">
    <li *ngFor="let field of formsService.getForm(formId)?.fields; let i = index" class="list-group-item" dnd-sortable [sortableIndex]="i" [dragData]="i" (onDropSuccess)="onDragAndDropFields($event)">
        <div class="row">
            <label for={{field.name}} class="col-sm-2 control-label">{{field.label}}</label>

            <div class="col-sm-9">
                <!-- If the field type is 'select' then show select element otherwise jump to the 'regularField' -->
                <div *ngIf="field.type === 'select'; else regularField">

                    <select id="type" class="form-control" name="type">
                        <option *ngFor="let optn of field.options" value="{{ optn.value }}">
                            {{ optn.displayText }}
                        </option>
                    </select>
                </div>

                <!-- This is displayed only if the field's type is NOT select -->
                <ng-template #regularField>
                    <input
                        class="form-control"
                        id="{{field.name}}"
                        name="{{field.name}}"
                        type="{{field.type}}"
                        [attr.accept]="field.type === 'file' ? 'image/*' : null"
                        placeholder="{{field.label}}">
                </ng-template>

                <app-field-definition
                    [fieldToBeEdited]="field"
                    (displayEditForm)="toggleEditForm($event)"
                    [ngClass]="{hide_element: field.id !== fieldIndexToEdit }">
                    <span>Editing field</span>
                </app-field-definition>
            </div>

            <div class="col-sm-1 pull-right" *ngIf="edit_mode===true">
                <div class="row">
                    <a (click)="fieldIndexToEdit = (fieldIndexToEdit === field.id) ? -1 : field.id">
                        <span class="glyphicon glyphicon-edit" alt="Edit" aria-hidden="true"></span>
                    </a>
                </div>
                <div class="row">
                    <a (click)="onDeleteField(field)">
                        <span class="glyphicon glyphicon-trash" alt="Delete" aria-hidden="true" style="color: red;"></span>
                    </a>
                </div>
            </div>
        </div>
    </li>
</ul>



